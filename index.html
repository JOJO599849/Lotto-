<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>سحب يانصيب بالكريبتو — تذاكر 1 USDT</title>
  <style>
    :root {
      --bg: #0f1320;
      --card: #181d2f;
      --text: #e7ecf3;
      --muted: #94a3b8;
      --accent: #22c55e;
      --accent2: #38bdf8;
      --danger: #ef4444;
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Naskh Arabic", "Noto Sans Arabic", Tahoma, Arial, sans-serif;
      background: radial-gradient(1000px 600px at 50% -100px, rgba(56,189,248,.15), transparent 60%),
                  radial-gradient(800px 400px at 10% 20%, rgba(34,197,94,.12), transparent 60%),
                  var(--bg);
      color: var(--text);
      line-height: 1.75;
    }
    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 24px;
    }
    header {
      display: grid;
      gap: 8px;
      margin: 24px 0 18px;
      text-align: center;
    }
    h1 { font-size: 28px; margin: 0; }
    .subtitle { color: var(--muted); font-size: 15px; }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    @media (max-width: 860px) {
      .grid { grid-template-columns: 1fr; }
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(4px);
    }
    .label { color: var(--muted); font-size: 14px; margin-bottom: 6px; }
    .address {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      direction: ltr;
      background: #111628;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      padding: 12px;
      word-break: break-all;
      font-size: 14px;
    }
    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    button {
      border: none;
      cursor: pointer;
      padding: 10px 14px;
      border-radius: 12px;
      font-size: 14px;
      transition: transform .08s ease, box-shadow .15s ease, background .2s ease;
      color: #0b1020;
      background: var(--accent);
      box-shadow: 0 8px 16px rgba(34,197,94,.25);
    }
    button.secondary {
      background: var(--accent2);
      box-shadow: 0 8px 16px rgba(56,189,248,.25);
    }
    button.ghost {
      color: var(--text);
      background: transparent;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: none;
    }
    button:active { transform: translateY(1px) scale(.99); }
    .muted { color: var(--muted); font-size: 13px; }
    .big {
      font-size: 34px;
      font-weight: 700;
      letter-spacing: 1px;
      margin: 8px 0;
    }
    .countdown {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    .pill {
      background: #0f1426;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      padding: 10px 14px;
      min-width: 70px;
      text-align: center;
      font-variant-numeric: tabular-nums;
    }
    .rules li { margin-bottom: 6px; }
    footer { margin: 26px 0 10px; text-align: center; color: var(--muted); font-size: 12px; }
    a { color: #93c5fd; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .success { color: #22c55e; font-weight: 700; }
    .danger { color: var(--danger); font-weight: 700; }
    .center { text-align: center; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>🎟️ سحب يانصيب بالكريبتو — سعر التذكرة 1 USDT (TRC20)</h1>
      <div class="subtitle">بسيط وشفاف. حول 1 USDT ثم أرسل TxID عبر النموذج. السحب يوميًا الساعة 9:00 مساءً.</div>
    </header>

    <div class="grid">
      <!-- Payment + QR -->
      <section class="card">
        <div class="label">عنوان الدفع — USDT (TRC20):</div>
        <div id="address" class="address">TDjG5X3fvHcBpnESA9GxNMEoS59cTSLayt</div>
        <div class="row">
          <button id="copyBtn">نسخ العنوان</button>
          <button id="formBtn" class="secondary">إرسال TxID عبر النموذج</button>
          <button id="refreshQR" class="ghost">تحديث QR</button>
        </div>
        <p class="muted">⬆️ بعد التحويل: أرسل <b>TxID</b> وعنوان محفظتك وعدد التذاكر عبر النموذج.</p>
        <div class="row" style="margin-top: 16px;">
          <div id="qrcode"></div>
        </div>
      </section>

      <!-- Countdown + Pot -->
      <section class="card">
        <div class="label">موعد السحب القادم</div>
        <div id="countdown" class="countdown">
          <div class="pill"><div id="d">00</div><div class="muted">أيام</div></div>
          <div class="pill"><div id="h">00</div><div class="muted">ساعات</div></div>
          <div class="pill"><div id="m">00</div><div class="muted">دقائق</div></div>
          <div class="pill"><div id="s">00</div><div class="muted">ثوانٍ</div></div>
        </div>
        <div class="muted" style="margin-top:10px">التوقيت حسب جهازك المحلي.</div>
        <hr style="border: none; border-top:1px solid rgba(255,255,255,0.08); margin:16px 0;" />
        <div class="label">رابط النموذج</div>
        <div class="address" id="formLinkBox">
          <span id="formLinkText">https://forms.gle/your-google-form-id</span>
        </div>
        <div class="row">
          <button id="openForm" class="secondary">فتح النموذج</button>
          <button id="copyForm" class="ghost">نسخ رابط النموذج</button>
        </div>
        <p class="muted">🔧 غيّر رابط النموذج من الكود (formUrl) لاحقًا.</p>
      </section>
    </div>

    <!-- Rules -->
    <section class="card" style="margin-top: 18px;">
      <h2 style="margin:0 0 10px;">القواعد والشفافية</h2>
      <ol class="rules">
        <li>سعر التذكرة: <b>1 USDT</b> (شبكة TRC20) إلى العنوان أعلاه.</li>
        <li>بعد التحويل: أرسل <b>TxID</b> وعنوان محفظتك وعدد التذاكر عبر النموذج.</li>
        <li>السحب يوميًا الساعة <b>9:00 مساءً</b>. سيتم اختيار الفائز علنًا.</li>
        <li><b>طريقة اختيار الفائز (قابلة للتحقق علنًا):</b><br/>
          عند موعد السحب، نأخذ <b>Hash</b> آخر بلوك على شبكة ترون بعد الساعة المحددة مباشرة.<br/>
          نحول الهاش لعدد ونطبق المعادلة: <code>الفائز = (قيمة_الهاش % إجمالي_التذاكر) + 1</code>.<br/>
          ننشر: الهاش، إجمالي التذاكر، ورقم التذكرة الفائزة.
        </li>
        <li>إرسال الجائزة للفائز يتم يدويًا مع نشر <b>TxID</b> التحويل.</li>
      </ol>
      <p class="muted">⚠️ ملاحظة: شارك على مسؤوليتك الشخصية. هذا سحب مبسط تجريبي.</p>
    </section>

    <footer>
      <div>© <span id="year"></span> سحب يانصيب بالكريبتو — نسخة تجريبية بسيطة.</div>
    </footer>
  </div>

  <!-- Minimal QRCode generator (qrcode.min.js v1.0.0, inlined) -->
  <script>
  /*! qrcode.js - MIT License - https://davidshimjs.github.io/qrcodejs/ */
  !function(o){function t(o){this.mode=e.MODE_8BIT_BYTE,this.data=o,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var n=[],h=this.data.charCodeAt(t);h>65536?(n[0]=240|(1835008&h)>>>18,n[1]=128|(258048&h)>>>12,n[2]=128|(4032&h)>>>6,n[3]=128|63&h):h>2048?(n[0]=224|(61440&h)>>>12,n[1]=128|(4032&h)>>>6,n[2]=128|63&h):h>128?(n[0]=192|(1984&h)>>>6,n[1]=128|63&h):n[0]=h,this.parsedData.push(n)}this.parsedData=function(o){for(var t=[],r=0;r<o.length;r++)t=t.concat(o[r]);return t}(this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(239,187,191))}function r(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(o,t){if(void 0==o.length)throw new Error(o.length+"/"+t);for(var r=0;r<o.length&&0==o[r];)r++;this.num=Array(o.length-r+t);for(var n=0;n<o.length-r;n++)this.num[n]=o[n+r]}function h(o,t){this.totalCount=o,this.dataCount=t}function i(){this.buffer=[],this.length=0}var e={};t.prototype={getLength:function(o){return this.parsedData.length},write:function(o){for(var t=0;t<this.parsedData.length;t++)o.put(this.parsedData[t],8)}},e.PAD0=236,e.PAD1=17,e.createData=function(o,t,r){for(var h=new i,a=0;a<r.length;a++){var e=r[a];h.put(e.mode,4),h.put(e.getLength(),e.getLengthInBits(o)),e.write(h)}var u=e.getRSBlocks(o,t),s=0;for(a=0;a<u.length;a++)s+=u[a].dataCount;for(var f=new i,c=0;c<u.length;c++)f.put(0,8);for(;h.getLengthInBits()+4<=8*s;)h.put(0,4);for(;h.getLengthInBits()%8!=0;)h.put(0,1);for(var l=[],p=0;p<h.buffer.length;p++)l.push(255&h.buffer[p]);for(var d=0;d<u.length;d++){var v=u[d].dataCount,m=u[d].totalCount-v,g=l.splice(0,v),y=e.getErrorCorrectPolynomial(m),b=new n(g,y.getLength()-1),w=b.mod(y);for(;w.getLength()<m;)w.num.unshift(0);var C=g.concat(w.num);f.buffer=f.buffer.concat(C)}return f},e.Polynomial=function(o,t){if(void 0==o.length)throw new Error(o.length+"/"+t);for(var r=0;r<o.length&&0==o[r];)r++;this.num=Array(o.length-r+t);for(var n=0;n<o.length-r;n++)this.num[n]=o[n+r]},e.Polynomial.prototype={get:function(o){return this.num[o]},getLength:function(){return this.num.length},multiply:function(o){for(var t=Array(this.getLength()+o.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<o.getLength();n++)t[r+n]+=this.get(r)*o.get(n);return new e.Polynomial(t,0)},mod:function(o){if(this.getLength()-o.getLength()<0)return this;var t=e.glog(this.get(0))-e.glog(o.get(0)),r=Array(this.getLength());for(var n=0;n<this.getLength();n++)r[n]=this.get(n);for(n=0;n<o.getLength();n++)r[n]^=e.gexp(e.glog(o.get(n))+t);return new e.Polynomial(r,0).mod(o)}},e.glog=function(o){if(o<1)throw new Error("glog("+o+")");return e.LOG_TABLE[o]},e.gexp=function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return e.EXP_TABLE[o]};for(var a=Array(256),u=0;u<8;u++)a[u]=1<<u;for(var s=Array(256),f=0;f<256;f++){for(var c=f,l=0;l<8;l++)c=1&c?c>>>1^285:c>>>1;s[f]=c}e.RS_BLOCK_TABLE=[[1,26,19],[1,44,34],[1,70,55],[1,100,80],[1,134,108],[2,86,68],[2,98,78],[2,121,97],[2,146,116],[2,86,68],[2,98,78],[2,121,97],[2,146,116]];for(var l=0;l<256;l++)e.EXP_TABLE[l]=1>l?1:e.EXP_TABLE[l-1]<<1^283&(e.EXP_TABLE[l-1]<<1);for(l=0;l<256;l++)e.LOG_TABLE[e.EXP_TABLE[l]]=l;e.getRSBlocks=function(o,t){var n=e.RS_BLOCK_TABLE[o-1];if(void 0==n)throw new Error("bad rs block @ typeNumber:"+o);for(var i=[],a=0;a<n.length/3;a++)for(var u=n[3*a+0],s=n[3*a+1],f=n[3*a+2],c=0;c<u;c++)i.push(new h(s,f));return i},i.prototype={get:function(o){var t=Math.floor(o/8);return 1==(this.buffer[t]>>>7-o%8&1)},put:function(o,t){for(var r=0;r<t;r++)this.putBit(1==(o>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(o){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var p={};p.stringToBytes=function(o){var r=[];for(var n=0;n<o.length;n++){var h=o.charCodeAt(n);h<128?r.push(h):h<2048?(r.push(192|h>>6),r.push(128|63&h)):h<55296||h>=57344?(r.push(224|h>>12),r.push(128|63&h>>6),r.push(128|63&h&63)):n++,h=(65536+((1023&h)<<10|1023&o.charCodeAt(n)))>>>18,r.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|63&h&63)}return r};var d={};d.stringToBytes=function(o){return p.stringToBytes(o)};var v={};v.QRNumber=t,v.QR8bitByte=t,v.QRCode=r,v.QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},o.QRCode=v}(window);
  </script>

  <script>
    // === Configuration ===
    const usdtAddress = "TDjG5X3fvHcBpnESA9GxNMEoS59cTSLayt"; // عدّل العنوان هنا إن لزم
    const formUrl = "https://forms.gle/your-google-form-id"; // ضع رابط Google Form هنا
    const dailyDrawHour = 21; // 9 PM local time

    // === QR Code ===
    function renderQR() {
      const qrEl = document.getElementById("qrcode");
      qrEl.innerHTML = "";
      const qr = new QRCode.QRCode(4, QRCode.QRErrorCorrectLevel.M); // typeNumber, error level
      qr.addData(usdtAddress);
      qr.make();
      const imgTag = qr.createImgTag(6, 8); // cellSize, margin
      qrEl.innerHTML = imgTag;
    }

    // === Copy Address ===
    document.getElementById("copyBtn").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(usdtAddress);
        showToast("تم نسخ العنوان ✅");
      } catch (e) {
        showToast("لم يتم النسخ — انسخ يدويًا", true);
      }
    });

    // === Form Buttons ===
    document.getElementById("formBtn").addEventListener("click", () => window.open(formUrl, "_blank"));
    document.getElementById("openForm").addEventListener("click", () => window.open(formUrl, "_blank"));
    document.getElementById("copyForm").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(formUrl);
        showToast("تم نسخ رابط النموذج ✅");
      } catch (e) {
        showToast("تعذر نسخ الرابط", true);
      }
    });

    document.getElementById("refreshQR").addEventListener("click", renderQR);

    // === Write address and form link on load ===
    document.getElementById("address").textContent = usdtAddress;
    document.getElementById("formLinkText").textContent = formUrl;

    // === Countdown ===
    function getNextDrawTime() {
      const now = new Date();
      const next = new Date(now);
      next.setHours(dailyDrawHour, 0, 0, 0);
      if (next <= now) next.setDate(next.getDate() + 1);
      return next;
    }
    function updateCountdown() {
      const now = new Date();
      const target = getNextDrawTime();
      const diff = target - now;
      const totalSec = Math.max(0, Math.floor(diff / 1000));
      const days = Math.floor(totalSec / 86400);
      const hours = Math.floor((totalSec % 86400) / 3600);
      const mins = Math.floor((totalSec % 3600) / 60);
      const secs = totalSec % 60;
      document.getElementById("d").textContent = String(days).padStart(2, "0");
      document.getElementById("h").textContent = String(hours).padStart(2, "0");
      document.getElementById("m").textContent = String(mins).padStart(2, "0");
      document.getElementById("s").textContent = String(secs).padStart(2, "0");
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // === Year ===
    document.getElementById("year").textContent = new Date().getFullYear();

    // === Toast ===
    function showToast(msg, isError=false) {
      const t = document.createElement("div");
      t.textContent = msg;
      t.style.position = "fixed";
      t.style.bottom = "20px";
      t.style.left = "50%";
      t.style.transform = "translateX(-50%)";
      t.style.background = isError ? "rgba(239,68,68,.95)" : "rgba(34,197,94,.95)";
      t.style.color = "#0b1020";
      t.style.padding = "10px 14px";
      t.style.borderRadius = "10px";
      t.style.boxShadow = "0 8px 20px rgba(0,0,0,.35)";
      t.style.zIndex = 9999;
      document.body.appendChild(t);
      setTimeout(() => t.remove(), 1600);
    }

    // Initialize
    renderQR();
  </script>
</body>
</html>
